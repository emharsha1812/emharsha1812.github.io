document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("paper-search"),t=Array.from(document.querySelectorAll("#papershelf .papershelf-card")),a=Array.from(document.querySelectorAll(".filter-btn"));if(!e&&0===a.length||0===t.length)return;const n=e=>(e||"").toLowerCase();let l="all";const s=()=>{const a=e?n(e.value):"";t.forEach(e=>{const t=[e.dataset.title,e.dataset.authors,e.dataset.tags].map(n).join(" "),s=!a||t.includes(a),o=(e.dataset.tags||"").split(/\s+/).filter(Boolean),r="all"===l||o.includes(l);e.style.display=s&&r?"":"none"})};e&&e.addEventListener("input",s),a.forEach(e=>{e.addEventListener("click",()=>{l=e.dataset.tag,a.forEach(t=>t.classList.toggle("active",t===e)),s()})}),s()});